<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Collaboration Space</title>
   <link rel="stylesheet" href="{{ url_for('static', filename='cstyle.css') }}">
   <style>

   .day-cell.has-pending {
    background-color: #e884da42;
    color: var(--pink-main);
    font-weight: 600;
    border: 2px solid var(--pink-light);
}
.day-cell.has-completed {
    background-color: #a084e880;
    color: var(--white);
    font-weight: 600;
    border: 2px solid var(--purple-main);
}
.day-cell.today {
        background: #a084e8;
        color: #fff;
        font-weight: bold;
        box-shadow: 0 2px 8px rgba(160, 132, 232, 0.5);
    }
    .day-cell.has-both {
    background: linear-gradient(135deg, var(--pink-light) 0%, var(--purple-light) 50%, var(--purple-main) 100%);
    color: var(--purple-main);
    font-weight: 600;
    border: 2px solid var(--purple-main);
}
   </style>
</head>
<body>
    <div id="loader-overlay" class="loader-overlay hidden">
        <div class="loader"></div>
    </div>

    <div class="dashboard-container">
          <aside class="sidebar">
            <div class="sidebar-logo">HelpScout</div>
            <nav>
                 <ul>
                    <li onclick="window.location.href='/home'">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        Home
                    </li>
                    <li onclick="window.location.href='/profile/user'" >
                        <svg class="icon" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        My Profile
                    </li>
                    <li onclick="window.location.href='/schedule'">
                        <svg class="icon" viewBox="0 0 24 24"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line></svg>
                        Schedule
                    </li>
                    <li onclick="window.location.href='/AI'">
                        <svg class="icon" viewBox="0 0 24 24"><path d="M12 19l7-7 3 3-7 7-3-3z"></path><path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"></path><path d="M2 2l7.586 7.586"></path><circle cx="11" cy="11" r="2"></circle></svg>
                        AI
                    </li>
                    <li onclick="window.location.href='/collaboration'" class="active" >
                        <svg class="icon" viewBox="0 0 24 24"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        Collaboration
                    </li>
                </ul>
            </nav>
            <div class="sidebar-bottom">
                <div onclick="window.location.href='/aiAssistant'" style="cursor: pointer;">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    Help?
                </div>
                <div id="logout-btn" style="cursor: pointer;">
                    <svg class="icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"></path><polyline points="16 17 21 12 16 7"></polyline><line x1="21" y1="12" x2="9" y2="12"></line></svg>
                    Log out
                </div>
            </div>
        </aside>
        <main class="main-content">
            <div class="collaboration-header">
                <h1 class="main-title">Collaboration Space</h1>
                <p class="subtitle">See your team's progress, manage projects, and stay on the same page.</p>
                <div>
                    <button class="invite-btn" id="invite-btn">Invite Collaborator</button>
                    <button class="invite-btn" id="requests-btn" style="background-color: var(--purple-main);">View Requests</button>
                </div>
            </div>

            <div class="collaborators-section">
                <h2 class="section-title">Your Collaborators</h2>
                <div class="collaborator-list" id="collaborators-list"></div>
                <button id="show-more-btn" class="show-more-btn" style="display: none;">Show More</button>
            </div>

            <div class="shared-projects-section">
                <div class="section-header">
                    <h2 class="section-title">Shared Projects</h2>
                    <div class="toggle-buttons">
                        <button class="toggle-btn active" id="my-tasks-btn">My Tasks</button>
                        <button class="toggle-btn" id="assigned-tasks-btn">Assigned By Me</button>
                    </div>
                </div>
                <div class="project-list" id="project-list"></div>
            </div>
        </main>
        
        <aside class="calendar-panel">
            <div class="calendar-illustration">
                <div class="calendar-img-container">
                    <div class="calendar-rings"></div>
                    <div id="calendar-date-display" class="calendar-date">
                        <span class="month"></span><span class="day-number"></span>
                    </div>
                </div>
            </div>
            <div class="calendar-widget">
                <div class="calendar-header">
                    <span class="nav-arrow" id="prev-month">‹</span>
                    <span id="current-month"></span>
                    <span class="nav-arrow" id="next-month">›</span>
                    <span class="today-btn" id="today-btn">TODAY</span>
                </div>
                <div class="calendar-grid" id="calendar-grid"></div>
            </div>
        </aside>
    </div>
    
    <div id="invite-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Invite a Collaborator</h2>
            <input type="email" id="invite-email" placeholder="Enter user's email" required>
            <p id="invite-modal-message" class="modal-message"></p>
            <div class="modal-actions">
                <button id="cancel-invite" class="modal-btn cancel-btn">Cancel</button>
                <button id="send-invite" class="modal-btn save-btn">Send Invite</button>
            </div>
        </div>
    </div>
    
    <div id="requests-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Collaboration Requests</h2>
            <div id="requests-modal-list"></div>
            <div class="modal-actions">
                <button id="close-requests-modal" class="modal-btn cancel-btn">Close</button>
            </div>
        </div>
    </div>

    <div id="assign-task-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Assign New Task to <span id="assignee-name"></span></h2>
            <form id="assign-task-form">
                <input type="text" id="assign-task-title" placeholder="Task Title" required>
                <textarea id="assign-task-description" placeholder="Description (optional)" rows="3"></textarea>
                <input type="text" id="assign-task-category" placeholder="Category (e.g., Work, Personal)" required>
                <input type="date" id="assign-task-date" required>
                <input type="time" id="assign-task-time" required>
            </form>
            <p id="assign-task-modal-message" class="modal-message"></p>
            <div class="modal-actions">
                <button id="cancel-assign-task" class="modal-btn cancel-btn">Cancel</button>
                <button id="confirm-assign-task" class="modal-btn save-btn">Assign Task</button>
            </div>
        </div>
    </div>
    
    <script src="{{ url_for('static', filename='collaboration.js') }}"></script>
</body>
</html>